(function(a){a.fn.windowPanes=function(b){function k(){var b=0;a(".pane").each(function(){b++;if(c.layout=="vertical"){a(this).css({overflow:"hidden",width:d<c.min_width?c.min_width+"px":d+"px",height:e<c.min_height?c.min_height+"px":e+"px",position:"relative"})}else if(c.layout=="horizontal"){a(this).css({overflow:"hidden",width:d<c.min_width?c.min_width+"px":d+"px",height:e<c.min_height?c.min_height+"px":e+"px",position:"absolute",top:"0",left:(b-1)*d+"px"})}})}function n(){a(".window_frame").append("<div class='window_nav'><div class='cur_nav'></div></div>");for(i=0;i<f;i++){var b=i+1;a(".window_nav").append("<div class='nav_item' id='nav_"+b+"'></div>")}o()}function o(){var b=a(".window_frame").width()-2;var d=a(".window_frame").height()-2;var e=b/f-2;var g=d/f-2;var h=0;if(c.layout=="vertical"){a(".window_nav").css({width:c.navSize,height:d,position:"absolute",top:2,right:"2px"});a(".cur_nav").css({height:g,width:"inherit",position:"absolute",top:0,right:0,"z-index":"100"});a(".nav_item").css({height:g,width:"inherit",position:"relative"}).each(function(){a(this).css({top:h});h=h+2})}else if(c.layout=="horizontal"){a(".window_nav").css({height:c.navSize,width:b,position:"absolute",bottom:2,left:"2px",clear:"both"});a(".cur_nav").css({height:"inherit",width:e,position:"absolute",top:0,left:0,"z-index":"100"});a(".nav_item").css({height:"inherit",width:e,"float":"left",position:"relative"}).each(function(){a(this).css({left:h});h=h+2})}}function p(){if(c.layout=="vertical"){var b=a("#nav_"+g).position();a(".cur_nav").animate({top:b.top+"px"},c.transition_speed,c.easing)}else if(c.layout=="horizontal"){var b=a("#nav_"+g).position();a(".cur_nav").animate({left:b.left+"px"},c.transition_speed,c.easing)}}function q(b){if(h==false||h==""){if(c.layout=="vertical"){if(g!=f){g++;var i=e<c.min_height?c.min_height:e;h=true;p();a(".pane_wrap").animate({top:"-"+(g-1)*i+"px"},c.transition_speed,c.easing,function(){a("body").animate({scrollTop:0},200);if(typeof b==="function"&&b()){b()}h=false})}else{if(typeof c.lastPane==="function"&&c.lastPane()){c.lastPane()}}}else if(c.layout=="horizontal"){if(g!=f){g++;var i=d<c.min_width?c.min_width:d;h=true;p();a(".pane_wrap").animate({left:"-"+(g-1)*i+"px"},c.transition_speed,c.easing,function(){if(typeof b==="function"&&b()){b()}h=false})}else{if(typeof c.lastPane==="function"&&c.lastPane()){c.lastPane()}}}}}function r(b){if(h==false||h==""){if(c.layout=="vertical"){if(g!=1){g--;var f=e<c.min_height?c.min_height:e;h=true;p();a(".pane_wrap").animate({top:"-"+(g-1)*f+"px"},c.transition_speed,c.easing,function(){a("body").animate({scrollTop:0},200);if(typeof b==="function"&&b()){b()}h=false})}else{if(typeof c.firstPane==="function"&&c.firstPane()){c.firstPane()}}}else if(c.layout=="horizontal"){if(g!=1){g--;var f=d<c.min_width?c.min_width:d;h=true;p();a(".pane_wrap").animate({left:"-"+(g-1)*f+"px"},c.transition_speed,c.easing,function(){if(typeof b==="function"&&b()){b()}h=false})}else{if(typeof c.firstPane==="function"&&c.firstPane()){c.firstPane()}}}}}var c=a.extend({transition_speed:500,easing:"",layout:"vertical",min_height:480,min_width:320,swipe:true,onComplete:function(){},onStart:function(){},firstPane:"default",lastPane:"default",ajaxLoading:true,slideSuppression:true,navSize:32},b);var d=a(window).width();var e=a(window).height();var f=0;var g=1;var h="";if(c.slideSuppression==true){h=false}if(typeof c.onStart==="function"){c.onStart.call(this)}if(c.ajax_loading==true){a("body").append("<div class='pane_loader'></div>")}var j=a(".window_frame").html();a(".window_frame").html("<div class='pane_wrap'>"+j+"</div>");a(".pane_wrap").children(":first").addClass("first_pane");a(".pane_wrap").children(":last").addClass("last_pane");if(c.layout=="vertical"){a(".pane_wrap").addClass("vertical_nav")}else if(c.layout=="horizontal"){a(".pane_wrap").addClass("horizontal_nav")}a("html, body, .window_frame").css({margin:0,padding:0,height:e<c.min_height?c.min_height+"px":e+"px",width:d<c.min_width?c.min_width+"px":d+"px",position:"relative"});a(".pane_wrap").css({position:"relative",width:"100%",top:"0",height:"100%"});a(".pane").each(function(){f++});if(c.layout=="horizontal"){var l=d<c.min_width?c.min_width+"px":d;a(".pane_wrap").css({width:f*l+"px"})}else{var m=e<c.min_height?c.min_height+"px":e;a(".pane_wrap").css({height:f*m+"px"})}if(c.ajax_loading==true){a(".pane_loader").fadeOut(750)}k();n();a(".window_frame").show();if(typeof c.onComplete==="function"){c.onComplete.call(this)}a(".next_pane").bind("click",function(){q()});a(".prev_pane").bind("click",function(){r()});if(c.layout=="vertical"&&c.swipe==true){a(document).bind("swipedown",function(){r()});a(document).bind("swipeup",function(){q()})}else if(c.layout=="horizontal"&&c.swipe==true){a(document).bind("swipeleft",function(){q()});a(document).bind("swiperight",function(){r()})}if(c.lastPane=="default"){if(c.layout=="vertical"){c.lastPane=function(){if(h==false||h==""){h=true;var b=e<c.min_height?c.min_height:e;var d=(g-1)*b+e*.4+"px";p();a(".pane_wrap").animate({top:"-"+d},350,function(){a(this).animate({top:"-"+(g-1)*b+"px"},350,function(){h=false})})}}}else if(c.layout=="horizontal"){c.lastPane=function(){if(h==false||h==""){h=true;var b=d<c.min_width?c.min_width:d;var e=(g-1)*b+d*.4+"px";p();a(".pane_wrap").animate({left:"-"+e},350,function(){a(this).animate({left:"-"+(g-1)*b+"px"},350,function(){h=false})})}}}}else if(c.lastPane=="first"){if(c.layout=="vertical"){c.lastPane=function(){if(h==false||h==""){h=true;g=1;p();a(".pane_wrap").animate({top:"0"},c.transition_speed,c.easing,function(){h=false})}}}else if(c.layout=="horizontal"){c.lastPane=function(){if(h==false||h==""){h=true;g=1;p();a(".pane_wrap").animate({left:"0"},c.transition_speed,c.easing,function(){h=false})}}}}else if(c.lastPane=="none"){c.lastPane=""}if(c.firstPane=="default"){if(c.layout=="vertical"){c.firstPane=function(){if(h==false||h==""){h=true;var b=e*.4+"px";p();a(".pane_wrap").animate({top:b},350,function(){a(this).animate({top:0},350,function(){h=false})})}}}else if(c.layout=="horizontal"){c.firstPane=function(){if(h==false||h==""){h=true;var b=d*.4+"px";p();a(".pane_wrap").animate({left:b},350,function(){a(this).animate({left:0},350,function(){h=false})})}}}}else if(c.firstPane=="last"){if(c.layout=="vertical"){c.firstPane=function(){if(h==false||h==""){h=true;g=f;var b=e<c.min_height?c.min_height:e;p();a(".pane_wrap").animate({top:"-"+(g-1)*b+"px"},c.transition_speed,c.easing,function(){h=false})}}}else if(c.layout=="horizontal"){c.firstPane=function(){if(h==false||h==""){h=true;g=f;var b=d<c.min_width?c.min_width:d;p();a(".pane_wrap").animate({left:"-"+(g-1)*b+"px"},c.transition_speed,c.easing,function(){h=false})}}}}else if(c.firstPane=="none"){c.firstPane=""}a(window).resize(function(){d=a(window).width();e=a(window).height();a("html, body, .window_frame").css({height:e<c.min_height?c.min_height+"px":e+"px",width:d<c.min_width?c.min_width+"px":d+"px"});k();if(c.layout=="vertical"){var b=e<c.min_height?c.min_height:e;var h=e<c.min_height?c.min_height+"px":e;a(".pane_wrap").css({top:"-"+(g-1)*b+"px",height:f*h+"px"})}else if(c.layout=="horizontal"){var b=d<c.min_width?c.min_width:d;var i=d<c.min_width?c.min_width+"px":d;a(".pane_wrap").css({left:"-"+(g-1)*b+"px",width:f*i+"px"})}o()})}})(jQuery)